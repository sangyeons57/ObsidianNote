[설계 이론 1](https://velog.io/@sontulip/how-to-db-design)

좋은 데이터 베이스는 돈을 버는(비용을 줄이는) 데이터 베이스 이다.

좋은 데이터 베이스 설계란
1. 무결성 - 데이터 베이스 내에 모든 값은 언제나 정확한 값을 유지해야 한다.
2. 유연성 - 데이터베이스 구조는 요구사항 변화에 대해 수정이 쉬워야 한다.
3. 확장성 - 데이터 베이스 구조는 기능 확장에 대해서 수정이 쉬워야 한다.

#### 기본키 설정
기본키 설정에는 인조키와 자연키가 있다.
인조키는 인조적으로 id라는 필드를 만드는 것이고
자연키는 인조적으로 만들지 않고 사용하는 값중 하나를 id처럼 사용하는것이다.

예를 들어 사용자 프로필을 저장할떄
id를 자연키로써 사용 할지
아니면 유저id 라는 인조 키 값을 만들지
등이 있다.

자연키의 장점
1. 그 값 자체로 유일한값이기 때문에 따로 인덱스를 구성할 필요가 없다.
자연키의 단점
1. 요구사항에 의해 사용하던 자연키를 변경 해야할수 있다. (유일한 값이 아니게 된던가 해당값을 외부적인 이유로 사용하지 못하게 된는 경우)
인조키의 장점
1. 비지니스 요구사항과 외부적 요인에 영향을 받지 않기때문에 변경될 일이 없다.
인조키의 단점
1. 데이터 베이스에 추가적인 값을 구성해야한다.( 데이터 베이스가 크기가 커진다. )

요약하면 자연키의 장점은 '성능', 인조키의 장점은 '유연성' 이라고 할수있다.
따라서 데이터 베이스에서는 '성능' 보다 '유연성' 이 우선시 됨으로 인조키를 사용하기도 한다. 
(상황에따라 판단해야함)

#### 다중값등은 포함하지 않는다.
데이터 베이스에 여러가지의 목적으로 관련 데이터를 다 저장 하는게 아니라
해당 데이터 베이스에 id를 이용해 서로 연관성을 가지고 사용한다.

따라서 데이터베이스가 다양한 의미를 가지고 있으면 분리 해줘야 한다.

#### 중복되는 필드는 포함 하지 않는다.
중복되는 의미를 가지는 필드가 여러개 생기면
다른 값을 바꿨을떄 수정이 한곳 에서만 발생하고 다른 곳에서는 발생하지 않을 가능성이 생겨
'무결성' 이 위협 받는다.

#### 데이터 타입의 대한 고민
CHAR vs VARCHAR
CHAR에 특징은 크기(길이)가 고정 되서 변하지 않는다는 것이고
VARCHAR에 특징은 저장되는 데이터에 크기에 맞게 데이터 공간이 배정된다.

따라서 CHAR는 저장 공간이 낭비되고
VARCHAR는 수정시 다른 장소로 옴겨야 함으로 수정에 대한 성능이 떨어진다.

이떄 만약 계시글을 저장한다면 어떻게 해야할까
VARCHAR가 성능이 더 안좋아 보이지만
웹서비스에서는 조회, 수정, 삽입, 삭제중 조회 성능이 가장 중요하다 왜냐하면 조회가 가장 많이 일어나기 떄문이다.

데이터를 조회 하기위해서는 데이터베이스가 크면 시간이 오레걸린다. (성능이 안좋다.)
따라서 무엇을 선택해야할지 생각 할수있다.

#### ENUM 데이터 타입 vs 찹조 테이블
필드에 들어갈 값을 제한하는 역할을 한다.

ENUM 타입의 장접
1. 쿼리에 값을 명확하게 넣을수있다.
2. 조인 이 필요없어 조회 속도가 빠르다.
3. 데티터 용량이 적게 차지한다 ('medium' 이라는 값을 100만개 저장할떄  VARCHAR는 600만 bytes 가 필요하지만  ENUM을 활용하면 100만 bytes만 필요하다. )
4. 추가적인 테이블이 필요 없다.
5. 데이터의 정확성을높일수있다. (유효하지 않은값은 사라지기때문에) 
ENUM 타입의 단점
1. ENUM 데이터에 변경이 발생하면 적용에 시간이 오레걸린다.(ENUM에 들어가있는 값들을 바꾸기위한 시간이 오레걸린다.)
2. 다른 데이터 베이스와 이식성이 안좋다. (해당 기능이 없는경우가 있다.)
3. 정렬할떄 추가적인 비용이 든다.
4. enum에는 추가적인 정보를 저장할수없다.
5. ENUM 은 동일  값을 복사하느것 말고는 재사용할수가 없다.
참조 데이블의 장점
1. 연관된 값을 같이 저장할 수 있다.
2. 새로운 값을 추가 하는것이 쉽다.
참조 테이블의 단점
1. 쿼리에 명확하게 값을 넣을수 없다.
2. 사용할떄마다 join을 사용해야 해서 속도가 느려질수 있다.
ENUM의 장점 '성능', '간편함'
참조 테이블의 장점 '유연성'

따라서 일반적으로는 대부분 참조 테이블을 사용한다.

#### 데이터 테이블 분리 이유
데이터 테이블에서 특정 id를 가진 값에 특정 값을 가지고 올떄
특정값 하나만 가지고 오는게 아니라 그 줄 자체를 전부 읽음으로 테입블이 길어지면 읽을게 많아진다. 


ERD 다루는 법은 따로 공부해야 할것 같다.
