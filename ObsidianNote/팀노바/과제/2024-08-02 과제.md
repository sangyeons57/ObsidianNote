
### 8월 30일
오늘 해야하는것
- 체팅 기능 테스트 해보기
- 어떻게 체팅기능 넣을짖 각보기
- 코드 정리하기
- SSL/TLS 공부하고 정리하기
- websocket예제 보고 분석하기
- php 클래스 만들어서 코드 가독성 향상시키기
- 시간 나거나 머리 식히고 싶을떄 android @String 작성해서 글자 통일 시키기
- 


하면 좋을거
- 서버랑 클라이언트에 응답 json생성 클레스르 만들면 좋을것 같다. 오타문제나 가독성을 향상 시킬것 같다. 
### 8월 31일
오늘 해야하는것
- websocket방식 명확하게 이해하기
- websocket체팅 테스트 만들기

오늘 이해해야한는것
- 왜 80포트 로 업그레이드 하는 방식인데 8080 포트를 사용해서 하는지
- 프록시 서버를 거쳐서 가는게 정상적인 방식인지
- 그러면 웹소켓 통신은 계속 프록시서버를 거쳐서 가능 방식인지
- 


오늘 갔다 와서 할것
- dow 스킬 수정 하기
- udon공부하기
- 

지금 서버가 작동하게 만들었음 지금 부터 해야하는건 체팅방이랑 서버인데
우선
기획을  하고 집에가서 만드는걸로


서버역할은
사요자를
특정 Room에 접속시켜주기
해당 room정보 가져오기
그리고 해당 room에서 발생하는 이벤트 전송

room이 있꼬
room코드를 입력하면 해당 room에 들어갈수 있다.
DM은 roomcode를 2명만 가지고 있는거다
사용자가 들어올떄 해당 사용자가 이 room에 들어올 권한이있는지 확인해야한다.

그후 사용자가 입력할떄
메타 데이터를 포함하는데
어떤 room으로 누가 어떤 메세지를 보네는지

json이면
어떤 종류에 메세지 인지
파라미터
메세지
이렇게 3종류면 되지 않나?

동작만보면

- 사용자 A 데이터 요청
- 사용자 A 데이터 반환
 - A룸에 접속요청
 - 사용자 A 권한 확인 & 저장
 - 사용자 A 접속위치 전환
 - 사용자 A 접속 요청 응답
 - 사용자 A 메세지 입력
 - A룸에 메시지 데이터 저장
 - A 룸 사용자 식별
 - 사용자 A메세지 A룸에 브로드캐스트
 - 사용자 B 사용자 A메세지 받음
 - A 메세지 저장 및 표시

우서 기본적으로 보안을 생각 하지 않고 만든후 
보안을 추가하는 방식이 현제 나에게는 좋을것 같다.

오늘 목표
- 사용자 여러명이 특정 체널에 들어가서
- 그 체널에서 체팅을 가능하게 하기
- websocket 송신밑 수신처리 java클래스 만들기
- 

json형태의 데이터 전송
작성자 이름
작성자 id 
작성 시간
작성 내용

데이터 입력 받아서작성 모든 접속자에게 출력하기
체널, 멤버 테이블 생성해서 체널 접속을 맴버로 해서 해당 체널에서 대화하기
체팅 테이블이랑 체팅 데이터 베이스를 만들어서 체팅 데이터 자동 저장 기능 만들기
체팅 불러오기 기능 만들기

### 8월5일
체널 테이블
- 체널 id
- dm 테이블인지
체널 테이블을
DM 체널 테이블과
프로젝트 체널 테이블을 서로
join해서 사용할수있도록하는게 좋을것같다.
DM  체널
- 체널 id
- 사용자 id 1
- 사용자 id 2

프로첵트 체널
 - 체널 id
- 카테고리 id
- 권한 id

dm체널 생성하면
자동으로 2명이 추가됨

접속하고싶은 체널의 id를 입력하면
해당 체널로 접속
해당 체널에 체팅을 함

체널이 생성되면 자동으로 체팅 테이블이 체팅 데이터 베이스에 추가되고
해당 테이블에 저장
- 체팅 Id(체팅 순서)
- 작성자 id
- 체팅 데이터
- 작성시간
- 수정시간
- 
지금 한게
체널생성하면 
체널 체팅 데이터 베이스 생성하기
를 했고

앞으로 해야할게
체널 을 생성하면
해당 체널을 접근할수있는 사람의 id를 저장하고 
해당 체널에 접속할때

DM기능만 완성하면 우선 1차적으로 적용하면 좋을것 같다.

그러기위해서는 체널이 존제하는지 확인하고
해당 체널에 접속하는 기능이 필요하다.
체널에 접속가능한 인원을 설정하는 기능도 필요하고
또한 상대방도 해당 체널에 접속할수있게해야한다.
그리고 체널에 접속하면 현제 접속중인 체널 리스트에 접속한 사용자를 포함시켜야한다.
그후에 발생하는 해당 체널에 입력을 해당 체널 리스트에 포함하 모두에게 전달된다.

여기까지 하고 DM

그후에
해당 체널에서 작성된 메세지는 모두 데이터베이스에 저장되고
android에 한번 불러와진 메세지를 로컬에 저장해서
보여주고 
불러오지 않은 메세지는 추가로 서버에 요청해서 불러오는 코드를 만들면 될것 같다.


집에가서는
기획 변경점 작성하고
DM완료하자

오늘 해야하는것은

### 8월 6일
오늘 해야한는것
안드로이드에 적용하는건데
친구 추가와 DM을 적용해서
- 친구추가
- 친구에게 DM보네기
- DM선택 화면
- DM화면
- 실시간 체팅 병합
- 이전 체팅페이징 다운
- 체팅 로컬 저장
오늘 이거 할면 될것같다.


먼저해야한는것
- 친구추가
- 친구에게 DM보네기 화면
-  DM선택화면
- DM화면

### 8월 7일
오늘 할것
- 안드로이드에서 이벤트 리스너 만들기
- php에 어디서든지 쉽게 send할수있게만들기
- 친구 요청 데이터 읽어와서 보여주고 친구로 추가할수있게하기
- 친구추가하고 DM화면에도 보여주게 하기
- DM할수있게 하기

이건 가능하면
 -  DM알림처리
 - 최신 입력자 올라오는거 처리

오늘 알아낸것
ws서버와  apache http는
서로다른 프로세스에서 작동하고있어서 변수에 접근하지 못하낟.
그러서 생기는 문제
http와 ws통신을 섞어서 쓸려던 부분에 문제가 생김

따라서  내각 해야하는 행동
- 로그인 이후의 모든 통신을 ws에서 해야함
- ws서버에서 리스너가 필요함


리스너가 진짜로 필요한가
단점
- 코드가 더 복잡해진다.
- 코드를 분할할수있다.

파일로 나누고 require로 이벤트가 들어왔을때 실행시키는 방법으로 할까?
android는 구조가 많아서 저런게 필요하지만
php서버는 단순하게 흐름을 진행하고 끝이여서 오히려 리스너를 추가했을떄 더 복잡해질 가능성이너무 큰거같다.

### 8월 8일
오늘 해야하는것
친구 업데이트 실시가 표시하기
친구 추가 되면 DM에 추가하기
DM추가되면 체널 추가되도록하기
발표준비하기

가능하면
해당 체널에서 실시간 체팅하기
- 체널접속
- 체팅 입력
- 체팅 전송

시간 되면 하는거
친구 제거
FCM인가 공부하는거

로그아웃할떄 웹소켓 닫히는것도 확인해야함


핑퐁메세지 만들기

오늘 한것
- 친구 없데이트 실시간 표시


해야하는것 재배열
- 시간 재대로 표시
- 과거 내용표시

아침에 일어나서 할것
- 발표 연습
- 전체 실행테스트
- 공부밑 추가할거 정리
- 코드 정리


웹소켓 통신에 요청 형식에 방식이 필요할수 있을것 같다.
이벤트 방식이아니라
요청을 구분해서
요청에서 응답이 들온게 내가 어떤 요청
했는지 식별 할수있게 해서
요청을 보넬떄 랜덤 코드를 같이 보네서