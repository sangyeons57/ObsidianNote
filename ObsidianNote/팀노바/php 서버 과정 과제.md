#팀노바 
앱 이름 : simple community

#### 개요
간단한 커뮤니티 만들기
자신의 계시판 의 관리자는(즉 해당 계시판을 만든사람) 은 자신의 계시판 내에 탭과 글을 관리할수있다. 
관리자는 다른 사람의 계시판, 탭, 글을 마음데로 관리할수있다.

로그인 기능이 필요하고  자신의 프로필을 꾸미는 기능을 만들수있으면 좋지만 마지막 부분이다.
권한이 부여되고 권한에 따라 행동을 할수있는것을 확인하면 된다.

우선 복잡한걸 다 없에고
가장 기본적인 계시판에 글을 추가 삭제 편집 읽기를 가능하게하자
참고는 네이버 카페를 하면 좋을것 같다.

#### 필요한 화면
1. 매인화면 - 인기글을 표시하고 로그인 될경우 자신과 관련된 페이지가 뜰수있게 
2. 로그인 화면
3. 프로필 화면
4. 계시판 화면 - 해당 계시판에 글을 표시하는 페이지


#### 필요기능
- 계시글 생성 제거 편집 보기 기능
- 회원 가입 로그인 기능 프로필 편집 기능
- 댓글 기능 대댓글 기능
- 글 구분자 기능
- 한번에 볼수있는 계시글수 재한 기능
- 계시판 생성 제거 기능
- 검색 기능 필터링 기능

### 구조
- html css javascript 파일을 각각 분리 시키자. 이유: 언어가 섞여있으면 프로젝트가 진행되면서 읽기 힘들것 같아서
- css 는 id 를 사용을 기피하고 class를 최대한 사용하자. 이유: 문법을 돌아가면서 쓰면 파일 읽기가 힘들어질수 있다.
- javascript는 javascirpt끼리 모아두고 그안에서 따로 구분을 하자. 이유 다른 파일들 사이사이에 있는것보다 모여있는게 무언가 확일할떄 쉬울것 같아서
- css는 단순하게 하기위해 최대한 1개으 파일만 사용하고 만약 특정 html에서만 특수하게 추가되야할부분이 있다면 메인 css파일을 최대한 복잡하지 않게 만들기위해 css파일을 따로 생성한다.
- es6 에 모듈 기능을 활용해서 실행부분과 정의 부분을 나누면 프로그래밍할떄 더 보기 쉬울것 으로 예상된다.
- onlclick 이벤트는 html에 작성하는게 좋을것같다. 이유: javascript가 복잡ㅎ지는게 더 개발 효율에 안좋을것 같다.
- php에 echo는 하나만 작성하기

### MySQL 구조
_계시판 데이터_
id
계시판 이름
계시판 순서

_계시글 데이터_
id
작성자  id
종속된 계시판 id
계시글 날짜 ( 수정등을 예상 해서 자동 갱신 요소를 추가할까 고민했지만 처음 글쓴 날짜 기준으로 가는게 좋을것 같다.  대신 수정된 글인지 여부를 표시하)
계시글 제목
계시글 내용
계시글 좋아요
수정된 글인지 여부

_댓글 데이터_
id
계시판 id + 종속된 계시글 id
작성자 id
대댓글인지 확인여부 
부모로 선택된 글의 id
댓글 내용
댓글 좋아요

_사용자 데이터_
id
사용자 계정 아이디
사용자 계정 비밀번호
사용자 이름
사용자 권한 id

권한 종류 데이터
id
권한관련 정보 

우선 권한 데이터를 현제 id를  권한 렙벨 처럼 사용하고
나중에 추가해야할 정보가 생기면 사용한다.

글 좋아요를 분리 시킬지 말지
좋아요는 다른것들과 다르게 수정이 자주일 어나는 종목이다.
따라서 테이블을 분리해서 수정할떄 더 빠르게 작동할도록 할수있다.
하지만 지금은 그냥 복잡도만 높히는 작업일것 같음으로 뺸다.

user 테이블 : 사용장 정보 테이블
![[Pasted image 20240529190552.png]]

writing 테이블 : 작성글 테이블
![[Pasted image 20240529191204.png]]

writing_like 테이블 :  좋아요 관련 데이터를 저장하는 테이블 한 계정이 여러번 좋아요 누르는 것을 막기위해
![[Pasted image 20240529191622.png]]
### 통신 방식
form 태그
장점
- 간단함
단점
- 전체 리로드
- 제한된 상호작용

AJAX 통신
장점
- 새로고침 없음
- 효율적인 데이터전송
단점
- 복잡성 증가
- 보안 문제
- 호환성 문제

자바스크립트에서 html생성할건지
php엣거 html생성할건지 정하는 문제라고 생각함


댓글 같은것은 전체를 리로딩 할필요 가 없나?

고민인 상당히 많이 되는데

html대신 대부분을 php로 만들면 상당히 간단하게 표현할수있을것 같다.
기능들을 php로 따로 만들고
데이터과 관련된 렌더링을 php 태그를 html사이에 껴서하고
javascript를 최소하는 방식으로 프로그래밍 하면 될것 같다.


폴더 구조 정하기
css 폴더
html php 폴더는 root에 두고
php 기능 폴더를 따로 만든다

프로그래밍 규칙 정하기
최대한 php위주 프로그램이을 하고
javascript를 줄인다.
- 단일화 ? 코드 이해를 쉽게 하기위해서

이 쿼리 문은 댓글을 깊이 우선 탐색 처럼 보이게 해주는 너부우선 탐색 쿼리 이다.
{중괄호} 는 변경 가능한 값
```MYSQL
WITH RECURSIVE CommentTree AS (
	SELECT id, content, CAST(id AS NCHAR) AS path
	FROM comments
	WHERE writing_id = {63} AND parent_comment_id = 0

	UNION ALL

	SELECT c.id, c.content, CONCAT(ct.path, c.id)
	FROM comments AS c
	INNER JOIN CommentTree AS ct ON c.parent_comment_id = ct.id
)
SELECT *
FROM CommentTree
LIMIT {20} OFFSET {0}
ORDER BY path ASC
```